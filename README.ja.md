# ChatGPT JumpBack（日本語）

ChatGPT でプロンプトを送信するとページが末尾まで自動スクロールされます。JumpBack は、読み途中の場所（画面中央付近のメッセージ）を記録して、すぐに戻れるようにする拡張機能です。文脈を見失わずに会話を追えます。

![メイン画面 - 末尾から読み途中に戻る](docs/screenshot-main.gif)

## 解決すること

- 送信のたびに末尾へ飛ばされる問題を回避し、読み途中の位置へ即座に戻れます。

## 仕組み

- 送信（Enter または送信ボタン）、または「最新へ/一番下へ」系の UI をクリックしたときに記録。
- アイコン/ショートカット/ページの右クリックメニューで記録位置へジャンプ。

---

## 機能

- 自動記録のトリガー:
  - Enter（Shift なし）で送信
  - 送信ボタンをクリック
  - 「最新へ/一番下へ」系の UI をクリック（未検出を減らすため広めのフォールバックを用意）
- ジャンプ方法:
  - 拡張アイコンをクリック
  - キーボードショートカット
  - ページの右クリックメニュー（有効時の ChatGPT 上のみ）
- アイコンの挙動:
  - 拡張 ON: 常にカラー
  - 拡張 OFF: 常にグレー
  - 非 ChatGPT サイト上では、アイコンがカラーでも操作は無効（何も起きません）
- 設定ページ:
  - 「ChatGPT JumpBack を有効にする」を切替（ブラウザ再起動後も保持）
- コンテキストメニュー:
  - 拡張アイコンの右クリック: 情報（GitHub）、有効/無効
  - ページの右クリック（ChatGPT・有効時のみ）: 「読み途中の会話に戻る」
- キーボードショートカット:
  - 既定: Windows/Linux は Alt+J、mac は Alt+Shift+J
  - chrome://extensions/shortcuts で変更可能

---

## インストール（開発者モード）

1. 本リポジトリをダウンロード（Code -> Download ZIP）して解凍。
2. Chrome で `chrome://extensions/` を開く。
3. 右上の「デベロッパーモード」をオン。
4. 「パッケージ化されていない拡張機能を読み込む」で解凍したフォルダを選択。
5. 必要なら拡張アイコンをピン留め。

---

## 使い方

- 会話を読みながら、Enter（Shift なし）で送信、または送信ボタン/「最新へ」UI をクリック。
- 拡張が画面中央付近のメッセージを記録します。
- ジャンプするには:
  - 拡張アイコンをクリック、または
  - ショートカット（Alt+J、mac は Alt+Shift+J）、または
  - ページの右クリック（ChatGPT 上） -> 「読み途中の会話に戻る」

ヒント: 多重記録を防ぐため、記録には 200ms のデバウンスを行います。

---

## 設定

- 設定ページの開き方:
  - `chrome://extensions/` -> 対象拡張 -> 「拡張機能のオプション」
- 「ChatGPT JumpBack を有効にする」
  - ON: カラー表示、ChatGPT 上で機能有効
  - OFF: グレー表示、機能は無効

ON/OFF はブラウザ再起動後も保持されます。

---

## 権限と対象

- 使用権限: `contextMenus`, `tabs`, `storage`, `scripting`
- コンテンツスクリプトの対象:
  - `https://chat.openai.com/*`
  - `https://chatgpt.com/*`
- 既存タブへの注入のためのホスト権限:
  - `https://chat.openai.com/*`
  - `https://chatgpt.com/*`
- ネットワーク通信や解析は行いません。保存は ON/OFF 設定のみです。
- ネットワーク通信や解析は行いません。保存は ON/OFF 設定のみです。
- 本拡張は OpenAI および ChatGPT の公式製品ではなく、いかなる提携・承認関係もありません。

---

## 注意事項

- ChatGPT の DOM 構造（`div[data-message-author-role]`）に依存します。
- ChatGPT は SPA のため、UI 変更でセレクタが変わる可能性があります。動作しなくなった場合はセレクタの更新が必要です。
- 「最新へ」検出は未検出を減らすため広めのフォールバックを採用しています。UI 変更などの影響で、まれに無関係なボタンに反応する可能性があります（未検出を避けるための設計上のトレードオフ）。想定外の挙動があれば Issue にてお知らせください。こちらで検出条件を調整します。

---

## トラブルシュート

- 設定で ON/OFF を切り替えてもアイコンが変わらない:
  - 必要であれば `chrome://extensions/` で拡張を再読み込み。
  - アイコンは拡張が ON のときだけカラー表示になります。
- ジャンプしない:
  - ChatGPT ページ上であることを確認。
  - ページのコンソールに `[ChatGPT JumpBack] content loaded` や `record/jump` のログが出ているか確認。
- ショートカットが効かない:
  - `chrome://extensions/shortcuts` で設定/変更してください。
  - macOS では Alt+Shift+J を既定にしています（文字入力との競合回避）。

---

## 注意事項

- 本スクリプトは **個人が作成した非公式ツール** です。
- OpenAI 公式の機能や拡張ではありません。
- 利用はご自身の責任において行ってください。
- 本スクリプトは ChatGPT のモデル・アルゴリズム・サーバーに干渉せず、公開されている画面上の DOM を操作するだけです。

## ライセンス

MIT License

---

## リンク

- プロジェクト（GitHub）: https://github.com/wanyakomochimochi/ChatGPTJumpBack
